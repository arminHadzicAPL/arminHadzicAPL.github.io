<!-- Jekyll Ideal Image Slider Include -->
<!-- https://github.com/jekylltools/jekyll-ideal-image-slider-include -->
<!-- v1.8 -->

<link rel="preload" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/js/main.js" as="script">
<!-- <link rel="preload" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/js/freebird.js" as="script"> -->
<link id="nytg-rendered-css" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/style.css" rel="stylesheet">
<link href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/css/components.css" rel="stylesheet">

<!-- sprites, polyfills, imports -->
<script>
  if (!window.Promise || !window.fetch || !window.URL) {
    document.write('<script src="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/polyfills.js"><\/script>');
  }
</script>
<script id="nytg-dynamic-script_template-options">
  function getSpritePos(value, depth){
	let val     = value - 1,
		square  = Math.sqrt (depth),
		floor   = Math.floor (val / square),
		extra   = val - floor,
		offsetX = (floor + extra) * -300,
		offsetY = floor * -300;

	return [offsetX, offsetY];
	};
  function testOnChange(event){
  	var yml = {
		pages: {
			index: {
			}
		}
	};
	var body = [
		{
			type: "start",
			value: "g-sliders-container",
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "tom_age",
				title: "Age",
				low: "",
				high: "",
				background: "sprites/tom-age.jpg",
				depth: "49",
				index: "17"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "alice_eyes",
				title: "Eyes",
				low: "",
				high: "",
				background: "sprites/alice-eyes-v2.jpg",
				depth: "49",
				index: "30"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "shawn_yaw",
				title: "Perspective",
				low: "",
				high: "",
				background: "sprites/shawn-yaw-v2.jpg",
				depth: "49",
				index: "39"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "maggie_smile",
				title: "Mood",
				low: "",
				high: "",
				background: "sprites/maggie-smile.jpg",
				depth: "49",
				index: "16"
			},
			css: ""
		},
		{
			type: "end",
			value: "g-sliders-container",
			css: ""
		},
		{
			type: "start",
			value: "g-sliders-container",
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "drew_gender",
				title: "Gender",
				low: "",
				high: "",
				background: "sprites/drew-gender.jpg",
				depth: "49",
				index: "14"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "ed_race",
				title: "Race&nbsp;and&nbsp;Ethnicity",
				low: "",
				high: "",
				background: "sprites/ed-race-2.jpg",
				depth: "49",
				index: "44"
			},
			css: ""
		},
		{
			type: "end",
			value: "g-sliders-container",
			css: ""
		}
	];
  	var DOC = {
		yml: yml,
		"overwrite-config-yml": "y",
		"top-asset": "",
		"top-asset-max-width": "",
		"use-lazy": "yes",
		body: body
	};
  	let filtered  = DOC.body.filter (function (item) { return item.type === "slider" }),
	    sliders   = filtered.map (function (slider)
	    {
	      let rangeHandle  = document.querySelector ("#range_" + slider.value.id),
	          sliderSprite = document.querySelector ("#" + slider.value.id + " .g-slider-sprite");

	      sliderSprite.style.backgroundImage = "url('https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/" + slider.value.background + "')";


	      rangeHandle.oninput = function ()
	      {
	        let offset = getSpritePos (event.value, slider.value.depth);
	        sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";
	      };

	      rangeHandle.value = parseInt (slider.value.index);
	      let offset = getSpritePos (slider.value.index, slider.value.depth);
	      sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";

	    return slider;
	  });
	}
</script>

<div class="g-story g-max-limit " data-preview-slug="2020-11-12-fake-people">
	<div class="g-container g-sliders-container" id="">
		<div class="g-slider-container" id="tom_age">
			<div class="g-slider-sprite" style="background-image: url(&quot;https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/sprites/tom-age.jpg&quot;); background-position: -8100px -900px;"></div>
			<div class="g-slider-desc">
		<!-- 		<div class="g-slider-low"></div> -->
				<div class="g-slider-title">Age</div>
		<!-- 		<div class="g-slider-high"></div> -->
			</div>
			<input type="range" min="1" max="49" value="17" class="g-slider" id="range_tom_age" onchange="testOnChange()">
		</div>
	</div>
</div>
