<!-- Jekyll Ideal Image Slider Include -->
<!-- https://github.com/jekylltools/jekyll-ideal-image-slider-include -->
<!-- v1.8 -->

<link id="nytg-rendered-css" href="/assets/css/renderslider/style.css" rel="stylesheet">
<script src="/assets/js/iframeResizer.contentWindow.min.js"></script>

<script id="nytg-dynamic-script_template-options">
	function getSpritePos(value, depth){
		let val     = value - 1,
			square  = Math.sqrt (depth),
			floor   = Math.floor (val / square),
			extra   = val - floor,
			offsetX = (floor + extra) * -256,
			offsetY = floor * -256;

		return [offsetX, offsetY];
	};
	var yml = {
			pages: {
				index: {}
			}
	};
	var body = [
		{
			type: "start",
			value: "g-sliders-container",
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "skintone",
				title: "Skin Tone and Facial Structure",
				low: "",
				high: "",
				background: "/img/skintone_pure.png",
				depth: "8",
				index: "3"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "gender_pure",
				title: "Binary Latent Variable: Gender",
				low: "",
				high: "",
				background: "/img/gender_pure.png",
				depth: "2",
				index: "1"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "orientation_pure",
				title: "Orientation",
				low: "",
				high: "",
				background: "/img/orientation_pure.png",
				depth: "8",
				index: "8"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "orientation_mixed",
				title: "Orientation and Gender",
				low: "",
				high: "",
				background: "/img/orientation_mixed.png",
				depth: "8",
				index: "4"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "smiling_mixed",
				title: "Expression (smile) and Hairstyle",
				low: "",
				high: "",
				background: "/img/smiling_mixed.png",
				depth: "8",
				index: "1"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "orientation_artifact",
				title: "Orientation (with artifacts)",
				low: "",
				high: "",
				background: "/img/orientation_artifact.png",
				depth: "8",
				index: "3"
			},
			css: ""
		},
		{
			type: "end",
			value: "g-sliders-container",
			css: ""
		},
	];
  	var DOC = {
		yml: yml,
		"overwrite-config-yml": "y",
		"top-asset": "",
		"top-asset-max-width": "",
		"use-lazy": "yes",
		body: body
	};
	function testOnChange(){
		let filtered  = DOC.body.filter (function (item) { return item.type === "slider" }),
			sliders   = filtered.map (function (slider)
		{
			let rangeHandle  = document.querySelector ("#range_" + slider.value.id),
				sliderSprite = document.querySelector ("#" + slider.value.id + " .g-slider-sprite");

			sliderSprite.style.backgroundImage = "url('" + slider.value.background + "')";


			rangeHandle.oninput = function ()
			{
			let offset = getSpritePos (this.value, slider.value.depth);
			sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";
			};

			rangeHandle.value = parseInt (slider.value.index);
			let offset = getSpritePos (slider.value.index, slider.value.depth);
			sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";

			return slider;
		});
	}

	window.onload = function() {
		testOnChange();
	}
</script>

<div class="g-story g-max-limit " data-preview-slug="2020-11-12-fake-people">
	<div class="g-container g-sliders-container" id="">
		<div class="g-slider-container" id="skintone">
			{% assign item = site.data.renderslider.images[0] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.skintone }}'); background-position: -768px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Skin Tone and Facial Structure</div>
			</div>
			<input type="range" min="1" max="8" value="3" class="g-slider" id="range_skintone">
		</div>
		<div class="g-slider-container" id="gender_pure">
			{% assign item = site.data.renderslider.images[1] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.gender_pure }}'); background-position: -256px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Binary Latent Variable: Gender</div>
			</div>
			<input type="range" min="1" max="2" value="1" class="g-slider" id="range_gender_pure">
		</div>
		<div class="g-slider-container" id="orientation_pure">
			{% assign item = site.data.renderslider.images[2] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.orientation_pure }}'); background-position: -2048px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Orientation</div>
			</div>
			<input type="range" min="1" max="8" value="8" class="g-slider" id="range_orientation_pure">
		</div>
		<div class="g-slider-container" id="orientation_mixed">
			{% assign item = site.data.renderslider.images[3] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.orientation_mixed }}'); background-position: -1024px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Orientation and Gender</div>
			</div>
			<input type="range" min="1" max="8" value="4" class="g-slider" id="range_orientation_mixed">
		</div>
		<div class="g-slider-container" id="smiling_mixed">
			{% assign item = site.data.renderslider.images[4] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.smiling_mixed }}'); background-position: -256px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Expression (smiling) and Hairstyle</div>
			</div>
			<input type="range" min="1" max="8" value="1" class="g-slider" id="range_smiling_mixed">
		</div>
		<div class="g-slider-container" id="orientation_artifact">
			{% assign item = site.data.renderslider.images[5] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.orientation_artifact }}'); background-position: -768px -256px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Orientation (with artifacts)</div>
			</div>
			<input type="range" min="1" max="8" value="3" class="g-slider" id="range_orientation_artifact">
		</div>
	</div>
</div>
