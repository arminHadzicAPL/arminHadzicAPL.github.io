<!-- Jekyll Ideal Image Slider Include -->
<!-- https://github.com/jekylltools/jekyll-ideal-image-slider-include -->
<!-- v1.8 -->

<!-- <link rel="preload" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/js/main.js" as="script"> -->
<!-- <link rel="preload" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/js/freebird.js" as="script"> -->
<link id="nytg-rendered-css" href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/style.css" rel="stylesheet">
<!-- <link href="https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/build/css/components.css" rel="stylesheet"> -->

<script id="nytg-dynamic-script_template-options">
	function getSpritePos(value, depth){
		let val     = value - 1,
			square  = Math.sqrt (depth),
			floor   = Math.floor (val / square),
			extra   = val - floor,
			offsetX = (floor + extra) * -300,
			offsetY = floor * -300;

		return [offsetX, offsetY];
	};
	var yml = {
			pages: {
				index: {}
			}
	};
	var body = [
		{
			type: "start",
			value: "g-background-to-white",
			css: ""
		},
		{
			type: "end",
			value: "g-background-to-white",
			css: ""
		},
		{
			type: "start",
			value: "g-sliders-container",
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "tom_age",
				title: "Age",
				low: "",
				high: "",
				background: "img/tom-age.jpg",
				depth: "49",
				index: "17"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "alice_eyes",
				title: "Eyes",
				low: "",
				high: "",
				background: "img/alice-eyes-v2.jpg",
				depth: "49",
				index: "30"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "shawn_yaw",
				title: "Perspective",
				low: "",
				high: "",
				background: "img/shawn-yaw-v2.jpg",
				depth: "49",
				index: "39"
			},
			css: ""
		},
		{
			type: "slider",
			value: {
				id: "maggie_smile",
				title: "Mood",
				low: "",
				high: "",
				background: "img/maggie-smile.jpg",
				depth: "49",
				index: "16"
			},
			css: ""
		},
		{
			type: "end",
			value: "g-sliders-container",
			css: ""
		},
	];
  	var DOC = {
		yml: yml,
		"overwrite-config-yml": "y",
		"top-asset": "",
		"top-asset-max-width": "",
		"use-lazy": "yes",
		body: body
	};
	function testOnChange(){
		let filtered  = DOC.body.filter (function (item) { return item.type === "slider" }),
			sliders   = filtered.map (function (slider)
		{
			let rangeHandle  = document.querySelector ("#range_" + slider.value.id),
				sliderSprite = document.querySelector ("#" + slider.value.id + " .g-slider-sprite");

			console.log(slider.value.background)
			sliderSprite.style.backgroundImage = "url('/" + slider.value.background + "')"; //"url('https://static01.nyt.com/newsgraphics/2020/11/12/fake-people/4b806cf591a8a76adfc88d19e90c8c634345bf3d/" + slider.value.background + "')";


			rangeHandle.oninput = function ()
			{
			let offset = getSpritePos (this.value, slider.value.depth);
			sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";
			};

			rangeHandle.value = parseInt (slider.value.index);
			let offset = getSpritePos (slider.value.index, slider.value.depth);
			sliderSprite.style.backgroundPosition = offset[0] + "px " + offset[1] +"px";

			return slider;
		});
	}

	window.onload = testOnChange()
</script>

<div class="g-story g-max-limit " data-preview-slug="2020-11-12-fake-people">
	<div class="g-container g-sliders-container" id="">
		<div class="g-slider-container" id="tom_age">
			{% assign item = site.data.fadeslider.images[0] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.tomimg }}'); background-position: -8100px -900px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Age</div>
			</div>
			<input type="range" min="1" max="49" value="17" class="g-slider" id="range_tom_age" onchange="testOnChange()">
		</div>
		<div class="g-slider-container" id="alice_eyes">
			{% assign item = site.data.fadeslider.images[1] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.aliceimg }}'); background-position: -8700px -1200px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Eyes</div>
			</div>
			<input type="range" min="1" max="49" value="30" class="g-slider" id="range_alice_eyes">
		</div>
		<div class="g-slider-container" id="shawn_yaw">
			{% assign item = site.data.fadeslider.images[2] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.shawnimg }}'); background-position: -11400px -1500px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Perspective</div>
			</div>
			<input type="range" min="1" max="49" value="39" class="g-slider" id="range_shawn_yaw">
		</div>
		<div class="g-slider-container" id="maggie_smile">
			{% assign item = site.data.fadeslider.images[3] %}
			<div class="g-slider-sprite" style="background-image: url('{{ item.maggieimg }}'); background-position: -4500px -600px;"></div>
			<div class="g-slider-desc">
				<div class="g-slider-title">Mood</div>
			</div>
			<input type="range" min="1" max="49" value="16" class="g-slider" id="range_maggie_smile">
		</div>
	</div>
</div>
